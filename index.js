"use strict";var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var $=R(Ee=>{Ee.require=function(){if(typeof process=="object"&&process.versions&&process.versions.electron)try{let e=require("original-fs");if(Object.keys(e).length>0)return e}catch{}return require("fs")}});var ee=R((dt,le)=>{le.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var te=R((It,de)=>{de.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}});var Le=R((mt,Ce)=>{var We=$().require(),x=require("path"),Ie=ee(),je=te(),Qe=typeof process=="object"&&process.platform==="win32",me=e=>e&&typeof e=="object",ne=new Uint32Array(256).map((e,t)=>{for(let o=0;o<8;o++)t&1?t=3988292384^t>>>1:t>>>=1;return t>>>0});function v(e){this.sep=x.sep,this.fs=We,me(e)&&me(e.fs)&&typeof e.fs.statSync=="function"&&(this.fs=e.fs)}Ce.exports=v;v.prototype.makeDir=function(e){let t=this;function o(c){let f=c.split(t.sep)[0];c.split(t.sep).forEach(function(i){if(!(!i||i.substr(-1,1)===":")){f+=t.sep+i;var m;try{m=t.fs.statSync(f)}catch{t.fs.mkdirSync(f)}if(m&&m.isFile())throw je.FILE_IN_THE_WAY.replace("%s",f)}})}o(e)};v.prototype.writeFileTo=function(e,t,o,c){let f=this;if(f.fs.existsSync(e)){if(!o)return!1;var i=f.fs.statSync(e);if(i.isDirectory())return!1}var m=x.dirname(e);f.fs.existsSync(m)||f.makeDir(m);var D;try{D=f.fs.openSync(e,"w",438)}catch{f.fs.chmodSync(e,438),D=f.fs.openSync(e,"w",438)}if(D)try{f.fs.writeSync(D,t,0,t.length,0)}finally{f.fs.closeSync(D)}return f.fs.chmodSync(e,c||438),!0};v.prototype.writeFileToAsync=function(e,t,o,c,f){typeof c=="function"&&(f=c,c=void 0);let i=this;i.fs.exists(e,function(m){if(m&&!o)return f(!1);i.fs.stat(e,function(D,h){if(m&&h.isDirectory())return f(!1);var N=x.dirname(e);i.fs.exists(N,function(a){a||i.makeDir(N),i.fs.open(e,"w",438,function(l,d){l?i.fs.chmod(e,438,function(){i.fs.open(e,"w",438,function(u,r){i.fs.write(r,t,0,t.length,0,function(){i.fs.close(r,function(){i.fs.chmod(e,c||438,function(){f(!0)})})})})}):d?i.fs.write(d,t,0,t.length,0,function(){i.fs.close(d,function(){i.fs.chmod(e,c||438,function(){f(!0)})})}):i.fs.chmod(e,c||438,function(){f(!0)})})})})})};v.prototype.findFiles=function(e){let t=this;function o(c,f,i){typeof f=="boolean"&&(i=f,f=void 0);let m=[];return t.fs.readdirSync(c).forEach(function(D){var h=x.join(c,D);t.fs.statSync(h).isDirectory()&&i&&(m=m.concat(o(h,f,i))),(!f||f.test(h))&&m.push(x.normalize(h)+(t.fs.statSync(h).isDirectory()?t.sep:""))}),m}return o(e,void 0,!0)};v.prototype.getAttributes=function(){};v.prototype.setAttributes=function(){};v.crc32update=function(e,t){return ne[(e^t)&255]^e>>>8};v.crc32=function(e){typeof e=="string"&&(e=Buffer.from(e,"utf8")),ne.length||genCRCTable();let t=e.length,o=-1;for(let c=0;c<t;)o=v.crc32update(o,e[c++]);return~o>>>0};v.methodToString=function(e){switch(e){case Ie.STORED:return"STORED ("+e+")";case Ie.DEFLATED:return"DEFLATED ("+e+")";default:return"UNSUPPORTED ("+e+")"}};v.canonical=function(e){if(!e)return"";var t=x.posix.normalize("/"+e.split("\\").join("/"));return x.join(".",t)};v.sanitize=function(e,t){e=x.resolve(x.normalize(e));for(var o=t.split("/"),c=0,f=o.length;c<f;c++){var i=x.normalize(x.join(e,o.slice(c,f).join(x.sep)));if(i.indexOf(e)===0)return i}return x.normalize(x.join(e,x.basename(t)))};v.toBuffer=function(t){return Buffer.isBuffer(t)?t:t instanceof Uint8Array?Buffer.from(t):typeof t=="string"?Buffer.from(t,"utf8"):Buffer.alloc(0)};v.readBigUInt64LE=function(e,t){var o=Buffer.from(e.slice(t,t+8));return o.swap64(),parseInt(`0x${o.toString("hex")}`)};v.isWin=Qe;v.crcTable=ne});var _e=R((Ct,he)=>{var Y=$().require(),De=require("path");Y.existsSync=Y.existsSync||De.existsSync;he.exports=function(e){var t=e||"",o=f(),c=null;function f(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return t&&Y.existsSync(t)?(c=Y.statSync(t),o.directory=c.isDirectory(),o.mtime=c.mtime,o.atime=c.atime,o.executable=(73&c.mode)!==0,o.readonly=(128&c.mode)===0,o.hidden=De.basename(t)[0]==="."):console.warn("Invalid path: "+t),{get directory(){return o.directory},get readOnly(){return o.readonly},get hidden(){return o.hidden},get mtime(){return o.mtime},get atime(){return o.atime},get executable(){return o.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:t,isDirectory:o.directory,isReadOnly:o.readonly,isHidden:o.hidden,isExecutable:o.executable,mTime:o.mtime,aTime:o.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var b=R((Lt,V)=>{V.exports=Le();V.exports.Constants=ee();V.exports.Errors=te();V.exports.FileAttr=_e()});var ge=R((Dt,Ne)=>{var q=b(),C=q.Constants;Ne.exports=function(){var e=20,t=10,o=0,c=0,f=0,i=0,m=0,D=0,h=0,N=0,a=0,l=0,d=0,u=0,r=0;e|=q.isWin?2560:768,o|=C.FLG_EFS;var s={};function E(n){n=new Date(n),f=(n.getFullYear()-1980&127)<<25|n.getMonth()+1<<21|n.getDate()<<16|n.getHours()<<11|n.getMinutes()<<5|n.getSeconds()>>1}return E(+new Date),{get made(){return e},set made(n){e=n},get version(){return t},set version(n){t=n},get flags(){return o},set flags(n){o=n},get method(){return c},set method(n){switch(n){case C.STORED:this.version=10;case C.DEFLATED:default:this.version=20}c=n},get time(){return new Date((f>>25&127)+1980,(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(f&31)<<1)},set time(n){E(n)},get crc(){return i},set crc(n){i=Math.max(0,n)>>>0},get compressedSize(){return m},set compressedSize(n){m=Math.max(0,n)>>>0},get size(){return D},set size(n){D=Math.max(0,n)>>>0},get fileNameLength(){return h},set fileNameLength(n){h=n},get extraLength(){return N},set extraLength(n){N=n},get commentLength(){return a},set commentLength(n){a=n},get diskNumStart(){return l},set diskNumStart(n){l=Math.max(0,n)>>>0},get inAttr(){return d},set inAttr(n){d=Math.max(0,n)>>>0},get attr(){return u},set attr(n){u=Math.max(0,n)>>>0},get fileAttr(){return u?(u>>>0|0)>>16&4095:0},get offset(){return r},set offset(n){r=Math.max(0,n)>>>0},get encripted(){return(o&1)===1},get entryHeaderSize(){return C.CENHDR+h+N+a},get realDataOffset(){return r+C.LOCHDR+s.fnameLen+s.extraLen},get dataHeader(){return s},loadDataHeaderFromBinary:function(n){var I=n.slice(r,r+C.LOCHDR);if(I.readUInt32LE(0)!==C.LOCSIG)throw new Error(q.Errors.INVALID_LOC);s={version:I.readUInt16LE(C.LOCVER),flags:I.readUInt16LE(C.LOCFLG),method:I.readUInt16LE(C.LOCHOW),time:I.readUInt32LE(C.LOCTIM),crc:I.readUInt32LE(C.LOCCRC),compressedSize:I.readUInt32LE(C.LOCSIZ),size:I.readUInt32LE(C.LOCLEN),fnameLen:I.readUInt16LE(C.LOCNAM),extraLen:I.readUInt16LE(C.LOCEXT)}},loadFromBinary:function(n){if(n.length!==C.CENHDR||n.readUInt32LE(0)!==C.CENSIG)throw new Error(q.Errors.INVALID_CEN);e=n.readUInt16LE(C.CENVEM),t=n.readUInt16LE(C.CENVER),o=n.readUInt16LE(C.CENFLG),c=n.readUInt16LE(C.CENHOW),f=n.readUInt32LE(C.CENTIM),i=n.readUInt32LE(C.CENCRC),m=n.readUInt32LE(C.CENSIZ),D=n.readUInt32LE(C.CENLEN),h=n.readUInt16LE(C.CENNAM),N=n.readUInt16LE(C.CENEXT),a=n.readUInt16LE(C.CENCOM),l=n.readUInt16LE(C.CENDSK),d=n.readUInt16LE(C.CENATT),u=n.readUInt32LE(C.CENATX),r=n.readUInt32LE(C.CENOFF)},dataHeaderToBinary:function(){var n=Buffer.alloc(C.LOCHDR);return n.writeUInt32LE(C.LOCSIG,0),n.writeUInt16LE(t,C.LOCVER),n.writeUInt16LE(o,C.LOCFLG),n.writeUInt16LE(c,C.LOCHOW),n.writeUInt32LE(f,C.LOCTIM),n.writeUInt32LE(i,C.LOCCRC),n.writeUInt32LE(m,C.LOCSIZ),n.writeUInt32LE(D,C.LOCLEN),n.writeUInt16LE(h,C.LOCNAM),n.writeUInt16LE(N,C.LOCEXT),n},entryHeaderToBinary:function(){var n=Buffer.alloc(C.CENHDR+h+N+a);return n.writeUInt32LE(C.CENSIG,0),n.writeUInt16LE(e,C.CENVEM),n.writeUInt16LE(t,C.CENVER),n.writeUInt16LE(o,C.CENFLG),n.writeUInt16LE(c,C.CENHOW),n.writeUInt32LE(f,C.CENTIM),n.writeUInt32LE(i,C.CENCRC),n.writeUInt32LE(m,C.CENSIZ),n.writeUInt32LE(D,C.CENLEN),n.writeUInt16LE(h,C.CENNAM),n.writeUInt16LE(N,C.CENEXT),n.writeUInt16LE(a,C.CENCOM),n.writeUInt16LE(l,C.CENDSK),n.writeUInt16LE(d,C.CENATT),n.writeUInt32LE(u,C.CENATX),n.writeUInt32LE(r,C.CENOFF),n.fill(0,C.CENHDR),n},toJSON:function(){let n=function(I){return I+" bytes"};return{made:e,version:t,flags:o,method:q.methodToString(c),time:this.time,crc:"0x"+i.toString(16).toUpperCase(),compressedSize:n(m),size:n(D),fileNameLength:n(h),extraLength:n(N),commentLength:n(a),diskNumStart:l,inAttr:d,attr:u,offset:r,entryHeaderSize:n(C.CENHDR+h+N+a)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Se=R((ht,pe)=>{var z=b(),p=z.Constants;pe.exports=function(){var e=0,t=0,o=0,c=0,f=0;return{get diskEntries(){return e},set diskEntries(i){e=t=i},get totalEntries(){return t},set totalEntries(i){t=e=i},get size(){return o},set size(i){o=i},get offset(){return c},set offset(i){c=i},get commentLength(){return f},set commentLength(i){f=i},get mainHeaderSize(){return p.ENDHDR+f},loadFromBinary:function(i){if((i.length!==p.ENDHDR||i.readUInt32LE(0)!==p.ENDSIG)&&(i.length<p.ZIP64HDR||i.readUInt32LE(0)!==p.ZIP64SIG))throw new Error(z.Errors.INVALID_END);i.readUInt32LE(0)===p.ENDSIG?(e=i.readUInt16LE(p.ENDSUB),t=i.readUInt16LE(p.ENDTOT),o=i.readUInt32LE(p.ENDSIZ),c=i.readUInt32LE(p.ENDOFF),f=i.readUInt16LE(p.ENDCOM)):(e=z.readBigUInt64LE(i,p.ZIP64SUB),t=z.readBigUInt64LE(i,p.ZIP64TOT),o=z.readBigUInt64LE(i,p.ZIP64SIZE),c=z.readBigUInt64LE(i,p.ZIP64OFF),f=0)},toBinary:function(){var i=Buffer.alloc(p.ENDHDR+f);return i.writeUInt32LE(p.ENDSIG,0),i.writeUInt32LE(0,4),i.writeUInt16LE(e,p.ENDSUB),i.writeUInt16LE(t,p.ENDTOT),i.writeUInt32LE(o,p.ENDSIZ),i.writeUInt32LE(c,p.ENDOFF),i.writeUInt16LE(f,p.ENDCOM),i.fill(" ",p.ENDHDR),i},toJSON:function(){let i=function(m,D){let h=m.toString(16).toUpperCase();for(;h.length<D;)h="0"+h;return"0x"+h};return{diskEntries:e,totalEntries:t,size:o+" bytes",offset:i(c,4),commentLength:f}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var ie=R(re=>{re.EntryHeader=ge();re.MainHeader=Se()});var Re=R((Nt,ye)=>{ye.exports=function(e){var t=require("zlib"),o={chunkSize:(parseInt(e.length/1024)+1)*1024};return{deflate:function(){return t.deflateRawSync(e,o)},deflateAsync:function(c){var f=t.createDeflateRaw(o),i=[],m=0;f.on("data",function(D){i.push(D),m+=D.length}),f.on("end",function(){var D=Buffer.alloc(m),h=0;D.fill(0);for(var N=0;N<i.length;N++){var a=i[N];a.copy(D,h),h+=a.length}c&&c(D)}),f.end(e)}}}});var Ue=R((gt,Te)=>{Te.exports=function(e){var t=require("zlib");return{inflate:function(){return t.inflateRawSync(e)},inflateAsync:function(o){var c=t.createInflateRaw(),f=[],i=0;c.on("data",function(m){f.push(m),i+=m.length}),c.on("end",function(){var m=Buffer.alloc(i),D=0;m.fill(0);for(var h=0;h<f.length;h++){var N=f[h];N.copy(m,D),D+=N.length}o&&o(m)}),c.end(e)}}}});var we=R((pt,Be)=>{"use strict";var{randomFillSync:Oe}=require("crypto"),ke=new Uint32Array(256).map((e,t)=>{for(let o=0;o<8;o++)t&1?t=t>>>1^3988292384:t>>>=1;return t>>>0}),ve=(e,t)=>Math.imul(e,t)>>>0,Ae=(e,t)=>ke[(e^t)&255]^e>>>8,K=()=>typeof Oe=="function"?Oe(Buffer.alloc(12)):K.node();K.node=()=>{let e=Buffer.alloc(12),t=e.length;for(let o=0;o<t;o++)e[o]=Math.random()*256&255;return e};var W={genSalt:K};function j(e){let t=Buffer.isBuffer(e)?e:Buffer.from(e);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let o=0;o<t.length;o++)this.updateKeys(t[o])}j.prototype.updateKeys=function(e){let t=this.keys;return t[0]=Ae(t[0],e),t[1]+=t[0]&255,t[1]=ve(t[1],134775813)+1,t[2]=Ae(t[2],t[1]>>>24),e};j.prototype.next=function(){let e=(this.keys[2]|2)>>>0;return ve(e,e^1)>>8&255};function Je(e){let t=new j(e);return function(o){let c=Buffer.alloc(o.length),f=0;for(let i of o)c[f++]=t.updateKeys(i^t.next());return c}}function $e(e){let t=new j(e);return function(o,c,f=0){c||(c=Buffer.alloc(o.length));for(let i of o){let m=t.next();c[f++]=i^m,t.updateKeys(i)}return c}}function et(e,t,o){if(!e||!Buffer.isBuffer(e)||e.length<12)return Buffer.alloc(0);let c=Je(o);if(c(e.slice(0,12))[11]!==t.crc>>>24)throw"ADM-ZIP: Wrong Password";return c(e.slice(12))}function tt(e){Buffer.isBuffer(e)&&e.length>=12?W.genSalt=function(){return e.slice(0,12)}:e==="node"?W.genSalt=K.node:W.genSalt=K}function nt(e,t,o,c=!1){e==null&&(e=Buffer.alloc(0)),Buffer.isBuffer(e)||(e=Buffer.from(e.toString()));let f=$e(o),i=W.genSalt();i[11]=t.crc>>>24&255,c&&(i[10]=t.crc>>>16&255);let m=Buffer.alloc(e.length+12);return f(i,m),f(e,m,12)}Be.exports={decrypt:et,encrypt:nt,_salter:tt}});var xe=R(Q=>{Q.Deflater=Re();Q.Inflater=Ue();Q.ZipCrypto=we()});var se=R((yt,Fe)=>{var S=b(),rt=ie(),F=S.Constants,oe=xe();Fe.exports=function(e){var t=new rt.EntryHeader,o=Buffer.alloc(0),c=Buffer.alloc(0),f=!1,i=null,m=Buffer.alloc(0);function D(){return!e||!Buffer.isBuffer(e)?Buffer.alloc(0):(t.loadDataHeaderFromBinary(e),e.slice(t.realDataOffset,t.realDataOffset+t.compressedSize))}function h(r){return!((t.flags&8)!==8&&S.crc32(r)!==t.dataHeader.crc)}function N(r,s,E){if(typeof s>"u"&&typeof r=="string"&&(E=r,r=void 0),f)return r&&s&&s(Buffer.alloc(0),S.Errors.DIRECTORY_CONTENT_ERROR),Buffer.alloc(0);var n=D();if(n.length===0)return r&&s&&s(n),n;if(t.encripted){if(typeof E!="string"&&!Buffer.isBuffer(E))throw new Error("ADM-ZIP: Incompatible password parameter");n=oe.ZipCrypto.decrypt(n,t,E)}var I=Buffer.alloc(t.size);switch(t.method){case S.Constants.STORED:if(n.copy(I),h(I))return r&&s&&s(I),I;throw r&&s&&s(I,S.Errors.BAD_CRC),new Error(S.Errors.BAD_CRC);case S.Constants.DEFLATED:var L=new oe.Inflater(n);if(r)L.inflateAsync(function(_){_.copy(_,0),s&&(h(_)?s(_):s(_,S.Errors.BAD_CRC))});else{if(L.inflate(I).copy(I,0),!h(I))throw new Error(S.Errors.BAD_CRC+" "+o.toString());return I}break;default:throw r&&s&&s(Buffer.alloc(0),S.Errors.UNKNOWN_METHOD),new Error(S.Errors.UNKNOWN_METHOD)}}function a(r,s){if((!i||!i.length)&&Buffer.isBuffer(e))return r&&s&&s(D()),D();if(i.length&&!f){var E;switch(t.method){case S.Constants.STORED:return t.compressedSize=t.size,E=Buffer.alloc(i.length),i.copy(E),r&&s&&s(E),E;default:case S.Constants.DEFLATED:var n=new oe.Deflater(i);if(r)n.deflateAsync(function(L){E=Buffer.alloc(L.length),t.compressedSize=L.length,L.copy(E),s&&s(E)});else{var I=n.deflate();return t.compressedSize=I.length,I}n=null;break}}else if(r&&s)s(Buffer.alloc(0));else return Buffer.alloc(0)}function l(r,s){return(r.readUInt32LE(s+4)<<4)+r.readUInt32LE(s)}function d(r){for(var s=0,E,n,I;s<r.length;)E=r.readUInt16LE(s),s+=2,n=r.readUInt16LE(s),s+=2,I=r.slice(s,s+n),s+=n,F.ID_ZIP64===E&&u(I)}function u(r){var s,E,n,I;r.length>=F.EF_ZIP64_SCOMP&&(s=l(r,F.EF_ZIP64_SUNCOMP),t.size===F.EF_ZIP64_OR_32&&(t.size=s)),r.length>=F.EF_ZIP64_RHO&&(E=l(r,F.EF_ZIP64_SCOMP),t.compressedSize===F.EF_ZIP64_OR_32&&(t.compressedSize=E)),r.length>=F.EF_ZIP64_DSN&&(n=l(r,F.EF_ZIP64_RHO),t.offset===F.EF_ZIP64_OR_32&&(t.offset=n)),r.length>=F.EF_ZIP64_DSN+4&&(I=r.readUInt32LE(F.EF_ZIP64_DSN),t.diskNumStart===F.EF_ZIP64_OR_16&&(t.diskNumStart=I))}return{get entryName(){return o.toString()},get rawEntryName(){return o},set entryName(r){o=S.toBuffer(r);var s=o[o.length-1];f=s===47||s===92,t.fileNameLength=o.length},get extra(){return m},set extra(r){m=r,t.extraLength=r.length,d(r)},get comment(){return c.toString()},set comment(r){c=S.toBuffer(r),t.commentLength=c.length},get name(){var r=o.toString();return f?r.substr(r.length-1).split("/").pop():r.split("/").pop()},get isDirectory(){return f},getCompressedData:function(){return a(!1,null)},getCompressedDataAsync:function(r){a(!0,r)},setData:function(r){i=S.toBuffer(r),!f&&i.length?(t.size=i.length,t.method=S.Constants.DEFLATED,t.crc=S.crc32(r),t.changed=!0):t.method=S.Constants.STORED},getData:function(r){return t.changed?i:N(!1,null,r)},getDataAsync:function(r,s){t.changed?r(i):N(!0,r,s)},set attr(r){t.attr=r},get attr(){return t.attr},set header(r){t.loadFromBinary(r)},get header(){return t},packHeader:function(){var r=t.entryHeaderToBinary(),s=S.Constants.CENHDR;return o.copy(r,s),s+=o.length,t.extraLength&&(m.copy(r,s),s+=t.extraLength),t.commentLength&&c.copy(r,s),r},toJSON:function(){let r=function(s){return"<"+(s&&s.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:t.toJSON(),compressedData:r(e),data:r(i)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Me=R((Rt,He)=>{var Pe=se(),it=ie(),w=b();He.exports=function(e,t){var o=[],c={},f=Buffer.alloc(0),i=new it.MainHeader,m=!1;let D=Object.assign(Object.create(null),t),{noSort:h}=D;e?l(D.readEntries):m=!0;function N(u){let r=i.diskEntries,s=i.offset;for(let E=0;E<r;E++){let n=s,I=new Pe(e);I.header=e.slice(n,n+=w.Constants.CENHDR),I.entryName=e.slice(n,n+=I.header.fileNameLength),s+=I.header.entryHeaderSize,u(I)}}function a(){m=!0,c={},o=new Array(i.diskEntries);for(var u=i.offset,r=0;r<o.length;r++){var s=u,E=new Pe(e);E.header=e.slice(s,s+=w.Constants.CENHDR),E.entryName=e.slice(s,s+=E.header.fileNameLength),E.header.extraLength&&(E.extra=e.slice(s,s+=E.header.extraLength)),E.header.commentLength&&(E.comment=e.slice(s,s+E.header.commentLength)),u+=E.header.entryHeaderSize,o[r]=E,c[E.entryName]=E}}function l(u){var r=e.length-w.Constants.ENDHDR,s=Math.max(0,r-65535),E=s,n=e.length,I=-1,L=0;for(r;r>=E;r--)if(e[r]===80){if(e.readUInt32LE(r)===w.Constants.ENDSIG){I=r,L=r,n=r+w.Constants.ENDHDR,E=r-w.Constants.END64HDR;continue}if(e.readUInt32LE(r)===w.Constants.END64SIG){E=s;continue}if(e.readUInt32LE(r)===w.Constants.ZIP64SIG){I=r,n=r+w.readBigUInt64LE(e,r+w.Constants.ZIP64SIZE)+w.Constants.ZIP64LEAD;break}}if(!~I)throw new Error(w.Errors.INVALID_FORMAT);i.loadFromBinary(e.slice(I,n)),i.commentLength&&(f=e.slice(L+w.Constants.ENDHDR)),u&&a()}function d(){o.length>1&&!h&&o.sort((u,r)=>u.entryName.toLowerCase().localeCompare(r.entryName.toLowerCase()))}return{get entries(){return m||a(),o},get comment(){return f.toString()},set comment(u){f=w.toBuffer(u),i.commentLength=f.length},getEntryCount:function(){return m?o.length:i.diskEntries},forEach:function(u){if(!m){N(u);return}o.forEach(u)},getEntry:function(u){return m||a(),c[u]||null},setEntry:function(u){m||a(),o.push(u),c[u.entryName]=u,i.totalEntries=o.length},deleteEntry:function(u){m||a();var r=c[u];if(r&&r.isDirectory){var s=this;this.getEntryChildren(r).forEach(function(E){E.entryName!==u&&s.deleteEntry(E.entryName)})}o.splice(o.indexOf(r),1),delete c[u],i.totalEntries=o.length},getEntryChildren:function(u){if(m||a(),u&&u.isDirectory){let r=[],s=u.entryName,E=s.length;return o.forEach(function(n){n.entryName.substr(0,E)===s&&r.push(n)}),r}return[]},compressToBuffer:function(){m||a(),d();let u=[],r=[],s=0,E=0;i.size=0,i.offset=0;for(let L of o){let _=L.getCompressedData();L.header.offset=E;let U=L.header.dataHeaderToBinary(),y=L.rawEntryName.length,g=Buffer.alloc(y+L.extra.length);L.rawEntryName.copy(g,0),g.copy(L.extra,y);let A=U.length+g.length+_.length;E+=A,u.push(U),u.push(g),u.push(_);let B=L.packHeader();r.push(B),i.size+=B.length,s+=A+B.length}s+=i.mainHeaderSize,i.offset=E,E=0;let n=Buffer.alloc(s);for(let L of u)L.copy(n,E),E+=L.length;for(let L of r)L.copy(n,E),E+=L.length;let I=i.toBinary();return f&&f.copy(I,w.Constants.ENDHDR),I.copy(n,E),n},toAsyncBuffer:function(u,r,s,E){try{m||a(),d();let n=[],I=[],L=0,_=0;i.size=0,i.offset=0;let U=function(y){if(y.length){let g=y.pop(),A=g.entryName+g.extra.toString();s&&s(A),g.getCompressedDataAsync(function(B){E&&E(A),g.header.offset=_;let Z=g.header.dataHeaderToBinary(),ce=Buffer.alloc(A.length,A),ue=Z.length+ce.length+B.length;_+=ue,n.push(Z),n.push(ce),n.push(B);let J=g.packHeader();I.push(J),i.size+=J.length,L+=ue+J.length,U(y)})}else{L+=i.mainHeaderSize,i.offset=_,_=0;let g=Buffer.alloc(L);n.forEach(function(B){B.copy(g,_),_+=B.length}),I.forEach(function(B){B.copy(g,_),_+=B.length});let A=i.toBinary();f&&f.copy(A,w.Constants.ENDHDR),A.copy(g,_),u(g)}};U(o)}catch(n){r(n)}}}}});var be=R((Tt,Ze)=>{var O=b(),H=require("path"),ot=se(),st=Me(),M=(e,t)=>typeof e=="boolean"?e:t,fe=(e,t)=>typeof e=="string"?e:t,ft={noSort:!1,readEntries:!1,method:O.Constants.NONE,fs:null};Ze.exports=function(e,t){let o=null,c=Object.assign(Object.create(null),ft);e&&typeof e=="object"&&(e instanceof Uint8Array||(Object.assign(c,e),e=c.input?c.input:void 0,c.input&&delete c.input),Buffer.isBuffer(e)&&(o=e,c.method=O.Constants.BUFFER,e=void 0)),Object.assign(c,t);let f=new O(c);if(e&&typeof e=="string")if(f.fs.existsSync(e))c.method=O.Constants.FILE,c.filename=e,o=f.fs.readFileSync(e);else throw new Error(O.Errors.INVALID_FILENAME);let i=new st(o,c),{canonical:m,sanitize:D}=O;function h(a){if(a&&i){var l;if(typeof a=="string"&&(l=i.getEntry(a)),typeof a=="object"&&typeof a.entryName<"u"&&typeof a.header<"u"&&(l=i.getEntry(a.entryName)),l)return l}return null}function N(a){let{join:l,normalize:d,sep:u}=H.posix;return l(".",d(u+a.split("\\").join(u)+u))}return{readFile:function(a,l){var d=h(a);return d&&d.getData(l)||null},readFileAsync:function(a,l){var d=h(a);d?d.getDataAsync(l):l(null,"getEntry failed for:"+a)},readAsText:function(a,l){var d=h(a);if(d){var u=d.getData();if(u&&u.length)return u.toString(l||"utf8")}return""},readAsTextAsync:function(a,l,d){var u=h(a);u?u.getDataAsync(function(r,s){if(s){l(r,s);return}r&&r.length?l(r.toString(d||"utf8")):l("")}):l("")},deleteFile:function(a){var l=h(a);l&&i.deleteEntry(l.entryName)},addZipComment:function(a){i.comment=a},getZipComment:function(){return i.comment||""},addZipEntryComment:function(a,l){var d=h(a);d&&(d.comment=l)},getZipEntryComment:function(a){var l=h(a);return l&&l.comment||""},updateFile:function(a,l){var d=h(a);d&&d.setData(l)},addLocalFile:function(a,l,d,u){if(f.fs.existsSync(a)){l=l?N(l):"";var r=a.split("\\").join("/").split("/").pop();l+=d||r;let s=f.fs.statSync(a);this.addFile(l,f.fs.readFileSync(a),u,s)}else throw new Error(O.Errors.FILE_NOT_FOUND.replace("%s",a))},addLocalFolder:function(a,l,d,u){if(d instanceof RegExp?d=function(r){return function(s){return r.test(s)}}(d):typeof d!="function"&&(d=function(){return!0}),l=l?N(l):"",a=H.normalize(a),f.fs.existsSync(a)){let r=f.findFiles(a),s=this;r.length&&r.forEach(function(E){var n=H.relative(a,E).split("\\").join("/");if(d(n)){var I=f.fs.statSync(E);I.isFile()?s.addFile(l+n,f.fs.readFileSync(E),"",u||I):s.addFile(l+n+"/",Buffer.alloc(0),"",u||I)}})}else throw new Error(O.Errors.FILE_NOT_FOUND.replace("%s",a))},addLocalFolderAsync:function(a,l,d,u){u instanceof RegExp?u=function(s){return function(E){return s.test(E)}}(u):typeof u!="function"&&(u=function(){return!0}),d=d?N(d):"",a=H.normalize(a);var r=this;f.fs.open(a,"r",function(s){if(s&&s.code==="ENOENT")l(void 0,O.Errors.FILE_NOT_FOUND.replace("%s",a));else if(s)l(void 0,s);else{var E=f.findFiles(a),n=-1,I=function(){if(n+=1,n<E.length){var L=E[n],_=H.relative(a,L).split("\\").join("/");_=_.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),u(_)?f.fs.stat(L,function(U,y){U&&l(void 0,U),y.isFile()?f.fs.readFile(L,function(g,A){g?l(void 0,g):(r.addFile(d+_,A,"",y),I())}):(r.addFile(d+_+"/",Buffer.alloc(0),"",y),I())}):process.nextTick(()=>{I()})}else l(!0,void 0)};I()}})},addLocalFolderPromise:function(a,l){return new Promise((d,u)=>{let{filter:r,zipPath:s}=Object.assign({},l);this.addLocalFolderAsync(a,(E,n)=>{n&&u(n),E&&d(this)},s,r)})},addFile:function(a,l,d,u){let r=h(a),s=r!=null;s||(r=new ot,r.entryName=a),r.comment=d||"";let E=typeof u=="object"&&u instanceof f.fs.Stats;E&&(r.header.time=u.mtime);var n=r.isDirectory?16:0;let I=r.isDirectory?16384:32768;E?I|=4095&u.mode:typeof u=="number"?I|=4095&u:I|=r.isDirectory?493:420,n=(n|I<<16)>>>0,r.attr=n,r.setData(l),s||i.setEntry(r)},getEntries:function(){return i?i.entries:[]},getEntry:function(a){return h(a)},getEntryCount:function(){return i.getEntryCount()},forEach:function(a){return i.forEach(a)},extractEntryTo:function(a,l,d,u,r,s){u=M(u,!1),r=M(r,!1),d=M(d,!0),s=fe(s,fe(r,void 0));var E=h(a);if(!E)throw new Error(O.Errors.NO_ENTRY);var n=m(E.entryName),I=D(l,s&&!E.isDirectory?s:d?n:H.basename(n));if(E.isDirectory){var L=i.getEntryChildren(E);return L.forEach(function(y){if(y.isDirectory)return;var g=y.getData();if(!g)throw new Error(O.Errors.CANT_EXTRACT_FILE);var A=m(y.entryName),B=D(l,d?A:H.basename(A));let Z=r?y.header.fileAttr:void 0;f.writeFileTo(B,g,u,Z)}),!0}var _=E.getData();if(!_)throw new Error(O.Errors.CANT_EXTRACT_FILE);if(f.fs.existsSync(I)&&!u)throw new Error(O.Errors.CANT_OVERRIDE);let U=r?a.header.fileAttr:void 0;return f.writeFileTo(I,_,u,U),!0},test:function(a){if(!i)return!1;for(var l in i.entries)try{if(l.isDirectory)continue;var d=i.entries[l].getData(a);if(!d)return!1}catch{return!1}return!0},extractAllTo:function(a,l,d,u){if(l=M(l,!1),u=fe(d,u),d=M(d,!1),!i)throw new Error(O.Errors.NO_ZIP);i.entries.forEach(function(r){var s=D(a,m(r.entryName.toString()));if(r.isDirectory){f.makeDir(s);return}var E=r.getData(u);if(!E)throw new Error(O.Errors.CANT_EXTRACT_FILE);let n=d?r.header.fileAttr:void 0;f.writeFileTo(s,E,l,n);try{f.fs.utimesSync(s,r.header.time,r.header.time)}catch{throw new Error(O.Errors.CANT_EXTRACT_FILE)}})},extractAllToAsync:function(a,l,d,u){if(l=M(l,!1),typeof d=="function"&&!u&&(u=d),d=M(d,!1),u||(u=function(L){throw new Error(L)}),!i){u(new Error(O.Errors.NO_ZIP));return}a=H.resolve(a);let r=L=>D(a,H.normalize(m(L.entryName.toString()))),s=(L,_)=>new Error(L+': "'+_+'"'),E=[],n=new Set;i.entries.forEach(L=>{L.isDirectory?E.push(L):n.add(L)});for(let L of E){let _=r(L),U=d?L.header.fileAttr:void 0;try{f.makeDir(_),U&&f.fs.chmodSync(_,U),f.fs.utimesSync(_,L.header.time,L.header.time)}catch{u(s("Unable to create folder",_))}}let I=()=>{n.size===0&&u()};for(let L of n.values()){let _=H.normalize(m(L.entryName.toString())),U=D(a,_);L.getDataAsync(function(y,g){if(g){u(new Error(g));return}if(!y)u(new Error(O.Errors.CANT_EXTRACT_FILE));else{let A=d?L.header.fileAttr:void 0;f.writeFileToAsync(U,y,l,A,function(B){if(!B){u(s("Unable to write file",U));return}f.fs.utimes(U,L.header.time,L.header.time,function(Z){if(Z){u(s("Unable to set times",U));return}n.delete(L),I()})})}})}I()},writeZip:function(a,l){if(arguments.length===1&&typeof a=="function"&&(l=a,a=""),!a&&c.filename&&(a=c.filename),!!a){var d=i.compressToBuffer();if(d){var u=f.writeFileTo(a,d,!0);typeof l=="function"&&l(u?null:new Error("failed"),"")}}},writeZipPromise:function(a,l){let{overwrite:d,perm:u}=Object.assign({overwrite:!0},l);return new Promise((r,s)=>{!a&&c.filename&&(a=c.filename),a||s("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(E=>{let n=I=>I?r(I):s("ADM-ZIP: Wasn't able to write zip file");f.writeFileToAsync(a,E,d,u,n)},s)})},toBufferPromise:function(){return new Promise((a,l)=>{i.toAsyncBuffer(a,l)})},toBuffer:function(a,l,d,u){return this.valueOf=2,typeof a=="function"?(i.toAsyncBuffer(a,l,d,u),null):i.compressToBuffer()}}}});var ze=R((Ut,at)=>{at.exports=[{name:"Appcircle",constant:"APPCIRCLE",env:"AC_APPCIRCLE"},{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"SYSTEM_TEAMFOUNDATIONCOLLECTIONURI",pr:"SYSTEM_PULLREQUEST_PULLREQUESTID"},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"Codefresh",constant:"CODEFRESH",env:"CF_BUILD_ID",pr:{any:["CF_PULL_REQUEST_NUMBER","CF_PULL_REQUEST_ID"]}},{name:"Codemagic",constant:"CODEMAGIC",env:"CM_BUILD_ID",pr:"CM_PULL_REQUEST"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"Expo Application Services",constant:"EAS",env:"EAS_BUILD"},{name:"GitHub Actions",constant:"GITHUB_ACTIONS",env:"GITHUB_ACTIONS",pr:{GITHUB_EVENT_NAME:"pull_request"}},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI",pr:"CI_MERGE_REQUEST_ID"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Google Cloud Build",constant:"GOOGLE_CLOUD_BUILD",env:"BUILDER_OUTPUT"},{name:"LayerCI",constant:"LAYERCI",env:"LAYERCI",pr:"LAYERCI_PULL_REQUEST"},{name:"Gerrit",constant:"GERRIT",env:"GERRIT_PROJECT"},{name:"Heroku",constant:"HEROKU",env:{env:"NODE",includes:"/app/.heroku/node/bin/node"}},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Nevercode",constant:"NEVERCODE",env:"NEVERCODE",pr:{env:"NEVERCODE_PULL_REQUEST",ne:"false"}},{name:"ReleaseHub",constant:"RELEASEHUB",env:"RELEASE_BUILD_ID"},{name:"Render",constant:"RENDER",env:"RENDER",pr:{IS_PULL_REQUEST:"true"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Screwdriver",constant:"SCREWDRIVER",env:"SCREWDRIVER",pr:{env:"SD_PULL_REQUEST",ne:"false"}},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Sourcehut",constant:"SOURCEHUT",env:{CI_NAME:"sourcehut"}},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}},{name:"Vercel",constant:"VERCEL",env:{any:["NOW_BUILDER","VERCEL"]}},{name:"Visual Studio App Center",constant:"APPCENTER",env:"APPCENTER_BUILD_ID"},{name:"Woodpecker",constant:"WOODPECKER",env:{CI:"woodpecker"},pr:{CI_BUILD_EVENT:"pull_request"}},{name:"Xcode Cloud",constant:"XCODE_CLOUD",env:"CI_XCODE_PROJECT",pr:"CI_PULL_REQUEST_NUMBER"},{name:"Xcode Server",constant:"XCODE_SERVER",env:"XCS"}]});var qe=R(P=>{"use strict";var Ve=ze(),T=process.env;Object.defineProperty(P,"_vendors",{value:Ve.map(function(e){return e.constant})});P.name=null;P.isPR=null;Ve.forEach(function(e){let o=(Array.isArray(e.env)?e.env:[e.env]).every(function(c){return Ge(c)});if(P[e.constant]=o,!!o)switch(P.name=e.name,typeof e.pr){case"string":P.isPR=!!T[e.pr];break;case"object":"env"in e.pr?P.isPR=e.pr.env in T&&T[e.pr.env]!==e.pr.ne:"any"in e.pr?P.isPR=e.pr.any.some(function(c){return!!T[c]}):P.isPR=Ge(e.pr);break;default:P.isPR=null}});P.isCI=!!(T.CI!=="false"&&(T.BUILD_ID||T.BUILD_NUMBER||T.CI||T.CI_APP_ID||T.CI_BUILD_ID||T.CI_BUILD_NUMBER||T.CI_NAME||T.CONTINUOUS_INTEGRATION||T.RUN_ID||P.name));function Ge(e){return typeof e=="string"?!!T[e]:"env"in e?T[e.env]&&T[e.env].includes(e.includes):"any"in e?e.any.some(function(t){return!!T[t]}):Object.keys(e).every(function(t){return T[t]===e[t]})}});var Xe=R((At,Ke)=>{"use strict";Ke.exports=qe().isCI});var ct=be(),k=Xe(),{join:X}=require("path"),{renameSync:ut}=require("fs"),{spawnSync:G}=require("child_process"),Ye={x86_64:"x86_64-unknown-linux-musl",arm64:"aarch64-unknown-linux-gnu"},ae=class{constructor(t,o){this.serverless=t,this.options=o,this.servicePath=this.serverless.config.servicePath||"",this.functions=this.serverless.service.getAllFunctions(),this.hooks={initialize:()=>this.initialize(),"before:package:package":()=>this.build(),"before:package:createDeploymentArtifacts":()=>this.build(),"before:deploy:function:packageFunction":()=>this.build(),"before:deploy:deploy":()=>this.beforeDeploy(),"after:deploy:deploy":()=>this.afterDeploy()}}initialize(){if(k)return null;if(G("cargo",["lambda","-V"]).error)throw new this.serverless.classes.Error("[Error] cargo lambda was not found in the project. Visit https://www.cargo-lambda.info for more information.")}async createZip(t){let c=this.serverless.service.getFunction(t),f=new ct,i=`${c.handler}-bootstrap.zip`,m=X(this.servicePath,"target/release",c.handler),D=X(this.servicePath,"./target/lambda",c.handler,i);return f.addLocalFile(m),f.writeZip(D),Promise.resolve({func:c,targetPath:D})}beforeDeploy(){}beforeBuild(){let t=X(this.servicePath,"target");if(G("rm",["-rf",t]),k)return null;let o=["lambda","build","--release","--output-format","zip",this.options.arch].filter(Boolean);if(G("cargo",o).error)throw new this.serverless.classes.Error("cargo lambda was not found in the project. Visit https://www.cargo-lambda.info for more information.")}afterDeploy(){this.serverless.cli.log("Thanks for using serverless-plugin-rust")}buildLocal(){if(k)return null;let t=this.serverless.service;this.functions.forEach(o=>{let c=t.getFunction(o);this.serverless.cli.log(`Building Rust ${c.handler} func...`);let f=X(this.servicePath,"target/lambda",c.handler,"bootstrap.zip"),i=X(this.servicePath,"target/lambda",c.handler,`${c.handler}-bootstrap.zip`);ut(f,i),c.package=c.package||{},c.package.artifact=i})}async buildCI(){if(!k)return null;let t=this.serverless.service,c=["build","--release","--locked","--target",Ye[this.options.arch]||Ye.x86_64].filter(Boolean),f=G("cargo",c),i=G("mkdir",["target/lambda"]);console.log(G("ls",["-la"])),(await Promise.all(this.functions.map(D=>this.createZip(D)))).forEach(({func:D,targetPath:h})=>{D.package=D.package||{},D.package.artifact=h})}build(){let t=this.serverless.service;if(t.provider.name!=="aws")throw new this.serverless.classes.Error(`${t.provider.name} not supported.`);this.beforeBuild(),this.buildLocal(),this.buildCI()}};module.exports=ae;
